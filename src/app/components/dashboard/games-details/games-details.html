<table class="table">
  <thead>
    <tr>
      <th class="center" style="width: 5em">#</th>
      <th class="center" style="width: 5em"></th>
      <th class="center" style="width: 7em">Change</th>
      <th class="center" style="width: 10em">Rating</th>
      <th class="center" style="width: 14em">Map</th>
      <th colspan="2">Heroes</th>
    </tr>
  </thead>
  <tfoot>
    <tr>
      <th class="center">#</th>
      <th class="center"></th>
      <th class="center">Change</th>
      <th class="center">Rating</th>
      <th class="center">Map</th>
      <th colspan="2">Heroes</th>
    </tr>
  </tfoot>
  <tbody>
    <tr id="row-form">
      <th class="center">{{newGameNb}}</th>
      <td></td>
      <td>
        <input class="input center" type="text" placeholder="0" disabled>
      </td>
      <td class="center">
        <input class="input center" type="number" placeholder="Rating" maxlength="4" style="max-width:85%;"
        [(ngModel)]="newRank" #rank="ngModel"
        [ngClass]="{'is-danger' : !isValid}"
        required>
      </td>
      <td class="center">
        <span class="select" style="max-width:85%;">
          <select [(ngModel)]="selectedMap">
            <option>None</option>
            <option *ngFor="let map of maps" [ngValue]=map>{{map.name}}</option>
          </select>
        </span>
      </td>
      <td>
          <a class="button is-primary is-outlined" id="tooltip">
            <span class="icon">
              <i class="fa fa-fw fa-plus"></i>
            </span>
          </a>
          <ng-container>
            <span *ngFor="let hero of selectedHeroes">
              <hero name="{{hero.name}}" size="game-details"></hero>
            </span>
          </ng-container>
      </td>
      <td style="text-align: right">
        <button class="button is-primary"
        [ngClass]="{'is-loading': isLoading, 'is-danger': webServiceError}"
        [disabled]="!rank.valid"
        (click)="addGame()">Add</button>
      </td>
    </tr>
    <tr *ngFor="let game of games">
      <th class="center">{{game.game_id}}</th>
      <td class="center">
        <i class="fa fa-fw center"
        [ngClass]="{'fa-chevron-down Defeat': (game.outcome==='Defeat'),
        'fa-minus Draw': (game.outcome==='Draw'),
        'fa-chevron-up Victory': (game.outcome==='Victory')}">
      </i></td>
      <td class="center" [ngClass]=game.outcome> <span *ngIf="game.variation>0">+</span>{{game.variation}}</td>
      <td class="center">{{game.rating}}</td>
      <td class="center">
        <div *ngIf="game.map">{{game.map.name}}</div>
      </td>
      <td colspan="2">
          <hero *ngFor="let index of game.game_has_hero" [name]="index.hero.slug" size="game-details"></hero>
      </td>
    </tr>
  </tbody>
</table>

<!-- Tooltip content -->
<div style="display: none;">
  <div id="tooltip-template">
    <hero-selection (heroClicked)="heroSelected($event)"></hero-selection>
  </div>
</div>
